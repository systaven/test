import{V as Be}from"./index-c4200cc5.js";import{P as J,a as Re,K as Xe,L as Ee,O as Ge}from"./KnowledgeBaseSelector-73bc8187.js";import{u as Je,z as We,r as H,a6 as Ye,o as t,k as n,b as l,w as i,d as K,t as b,l as Q,g as W,f as g,i as Y,c as s,Q as Ze,F as R,n as Te,ad as Me,ab as w,j as Ie,V as Se,at as ke,aA as pe,a7 as Ae,h as x,p as Z,e as Le,T as q,aB as De,aj as Oe,aa as ze,U as Ne,H as qe,D as _e,aC as ea,aD as aa,B as ta,aE as la,X as da}from"./index-427e6df5.js";import{_ as ia}from"./_plugin-vue_export-helper-c27b6911.js";const ma={key:0,class:"config-section"},na={class:"metadata-key"},ua={key:0,class:"important-hint"},sa={key:0,class:"object-config"},oa={key:0,class:"nested-object"},ca={key:0,class:"nested-container"},ba={key:0},fa={class:"property-key"},ya={key:1},Va={key:0,class:"important-hint"},Ka={key:0,class:"w-100"},va={key:0},ga={key:1},ra={key:2},ha={key:3},Ua={key:4},xa={key:5,class:"d-flex flex-wrap gap-20"},Ca={key:8,class:"editor-container"},wa={key:1,class:"w-100"},ja={key:1,class:"simple-config"},Ba={class:"property-key"},Ea={key:0,class:"important-hint"},Ta={class:"w-100"},Ia={__name:"AstrBotConfig",props:{metadata:{type:Object,required:!0},iterable:{type:Object,required:!0},metadataKey:{type:String,required:!0},isEditing:{type:Boolean,default:!1}},setup(e){const j=e,{t:X}=Je(),M=We(()=>{if(!j.iterable)return{};const{hint:v,...m}=j.iterable;return m}),B=H(!1),F=H(""),k=H("json"),p=H("vs-light");let G=null;function Fe(v,m,r,c){F.value=v,k.value=c||"json",p.value=r||"vs-light",G=m,B.value=!0}function Pe(){B.value=!1}function $e(v,m){const r=m.split(".");let c=v;for(const o of r)if(c&&typeof c=="object"&&o in c)c=c[o];else return;return c}function P(v,m){if(!(v!=null&&v.condition))return!0;for(const[r,c]of Object.entries(v.condition))if($e(j.iterable,r)!==c)return!1;return!0}function He(v,m){const r=Object.entries(v);for(let c=m+1;c<r.length;c++){const[o,C]=r[c],u=j.metadata[j.metadataKey].items[o];if(!(u!=null&&u.invisible)&&P(u))return!0}return!1}return(v,m)=>{var c;const r=Ye("AstrBotConfig",!0);return t(),n(R,null,[e.iterable&&((c=e.metadata[e.metadataKey])==null?void 0:c.type)==="object"?(t(),n("div",ma,[l(W,{class:"config-title"},{default:i(()=>{var o;return[K(b((o=e.metadata[e.metadataKey])==null?void 0:o.description)+" ",1),Q("span",na,"("+b(e.metadataKey)+")",1)]}),_:1}),l(Y,{class:"config-hint"},{default:i(()=>{var o,C,u;return[(o=e.metadata[e.metadataKey])!=null&&o.obvious_hint&&((C=e.metadata[e.metadataKey])!=null&&C.hint)?(t(),n("span",ua,"‼️")):g("",!0),K(" "+b((u=e.metadata[e.metadataKey])==null?void 0:u.hint),1)]}),_:1})])):g("",!0),l(qe,{class:"px-0 py-1"},{default:i(()=>{var o,C;return[((o=e.metadata[e.metadataKey])==null?void 0:o.type)==="object"||(C=e.metadata[e.metadataKey])!=null&&C.config_template?(t(),n("div",sa,[e.iterable.hint&&!e.isEditing?(t(),s(Ze,{key:0,type:"info",variant:"tonal",class:"mb-4",border:"start",density:"compact"},{default:i(()=>[K(b(e.iterable.hint),1)]),_:1})):g("",!0),(t(!0),n(R,null,Te(M.value,(u,a,U)=>{var E,T,I,S;return t(),n("div",{key:a,class:"config-item"},[((E=e.metadata[e.metadataKey].items[a])==null?void 0:E.type)==="object"?(t(),n("div",oa,[e.metadata[e.metadataKey].items[a]&&!((T=e.metadata[e.metadataKey].items[a])!=null&&T.invisible)&&P(e.metadata[e.metadataKey].items[a],a)?(t(),n("div",ca,[l(Me,null,{default:i(()=>[l(r,{metadata:e.metadata[e.metadataKey].items,iterable:e.iterable[a],metadataKey:a},null,8,["metadata","iterable","metadataKey"])]),_:2},1024)])):g("",!0)])):(t(),n(R,{key:1},[!((I=e.metadata[e.metadataKey].items[a])!=null&&I.invisible)&&P(e.metadata[e.metadataKey].items[a],a)?(t(),s(ze,{key:0,class:"config-row"},{default:i(()=>[l(w,{cols:"12",sm:"6",class:"property-info"},{default:i(()=>[l(Ie,{density:"compact"},{default:i(()=>[l(W,{class:"property-name"},{default:i(()=>{var f,y;return[(f=e.metadata[e.metadataKey].items[a])!=null&&f.description?(t(),n("span",ba,[K(b((y=e.metadata[e.metadataKey].items[a])==null?void 0:y.description)+" ",1),Q("span",fa,"("+b(a)+")",1)])):(t(),n("span",ya,b(a),1))]}),_:2},1024),l(Y,{class:"property-hint"},{default:i(()=>{var f,y,h;return[(f=e.metadata[e.metadataKey].items[a])!=null&&f.obvious_hint&&((y=e.metadata[e.metadataKey].items[a])!=null&&y.hint)?(t(),n("span",Va,"‼️")):g("",!0),K(" "+b((h=e.metadata[e.metadataKey].items[a])==null?void 0:h.hint),1)]}),_:2},1024)]),_:2},1024)]),_:2},1024),l(w,{cols:"12",sm:"1",class:"d-flex align-center type-indicator"},{default:i(()=>{var f;return[(f=e.metadata[e.metadataKey].items[a])!=null&&f.invisible?g("",!0):(t(),s(Se,{key:0,color:"primary",label:"",size:"x-small",variant:"flat"},{default:i(()=>{var y;return[K(b(((y=e.metadata[e.metadataKey].items[a])==null?void 0:y.type)||"string"),1)]}),_:2},1024))]}),_:2},1024),l(w,{cols:"12",sm:"5",class:"config-input"},{default:i(()=>{var f,y,h,A,L,D,O,z,V,_,ee,ae,te,le,de,ie,me,ne,ue,se,oe,ce,be,fe,ye,Ve,Ke,ve,ge,re,he,Ue,xe,Ce,we,je;return[e.metadata[e.metadataKey].items[a]?(t(),n("div",Ka,[((f=e.metadata[e.metadataKey].items[a])==null?void 0:f._special)==="select_provider"?(t(),n("div",va,[l(J,{modelValue:e.iterable[a],"onUpdate:modelValue":d=>e.iterable[a]=d,"provider-type":"chat_completion"},null,8,["modelValue","onUpdate:modelValue"])])):((y=e.metadata[e.metadataKey].items[a])==null?void 0:y._special)==="select_provider_stt"?(t(),n("div",ga,[l(J,{modelValue:e.iterable[a],"onUpdate:modelValue":d=>e.iterable[a]=d,"provider-type":"speech_to_text"},null,8,["modelValue","onUpdate:modelValue"])])):((h=e.metadata[e.metadataKey].items[a])==null?void 0:h._special)==="select_provider_tts"?(t(),n("div",ra,[l(J,{modelValue:e.iterable[a],"onUpdate:modelValue":d=>e.iterable[a]=d,"provider-type":"text_to_speech"},null,8,["modelValue","onUpdate:modelValue"])])):((A=e.metadata[e.metadataKey].items[a])==null?void 0:A._special)==="select_persona"?(t(),n("div",ha,[l(Re,{modelValue:e.iterable[a],"onUpdate:modelValue":d=>e.iterable[a]=d},null,8,["modelValue","onUpdate:modelValue"])])):((L=e.metadata[e.metadataKey].items[a])==null?void 0:L._special)==="select_knowledgebase"?(t(),n("div",Ua,[l(Xe,{modelValue:e.iterable[a],"onUpdate:modelValue":d=>e.iterable[a]=d},null,8,["modelValue","onUpdate:modelValue"])])):((D=e.metadata[e.metadataKey].items[a])==null?void 0:D.type)==="list"&&((O=e.metadata[e.metadataKey].items[a])!=null&&O.options)&&!((z=e.metadata[e.metadataKey].items[a])!=null&&z.invisible)&&((V=e.metadata[e.metadataKey].items[a])==null?void 0:V.render_type)==="checkbox"?(t(),n("div",xa,[(t(!0),n(R,null,Te((_=e.metadata[e.metadataKey].items[a])==null?void 0:_.options,(d,$)=>{var N;return t(),s(ke,{modelValue:e.iterable[a],"onUpdate:modelValue":Qe=>e.iterable[a]=Qe,label:(N=e.metadata[e.metadataKey].items[a])!=null&&N.labels?e.metadata[e.metadataKey].items[a].labels[$]:d,value:d,class:"mr-2",color:"primary","hide-details":""},null,8,["modelValue","onUpdate:modelValue","label","value"])}),256))])):((ee=e.metadata[e.metadataKey].items[a])==null?void 0:ee.type)==="list"&&((ae=e.metadata[e.metadataKey].items[a])!=null&&ae.options)&&!((te=e.metadata[e.metadataKey].items[a])!=null&&te.invisible)?(t(),s(pe,{key:6,modelValue:e.iterable[a],"onUpdate:modelValue":d=>e.iterable[a]=d,items:(le=e.metadata[e.metadataKey].items[a])==null?void 0:le.options,disabled:(de=e.metadata[e.metadataKey].items[a])==null?void 0:de.readonly,density:"compact",variant:"outlined",class:"config-field","hide-details":"",chips:"",multiple:""},null,8,["modelValue","onUpdate:modelValue","items","disabled"])):(ie=e.metadata[e.metadataKey].items[a])!=null&&ie.options&&!((me=e.metadata[e.metadataKey].items[a])!=null&&me.invisible)?(t(),s(Ae,{key:7,modelValue:e.iterable[a],"onUpdate:modelValue":d=>e.iterable[a]=d,items:(ne=e.metadata[e.metadataKey].items[a])==null?void 0:ne.options,disabled:(ue=e.metadata[e.metadataKey].items[a])==null?void 0:ue.readonly,density:"compact",variant:"outlined",class:"config-field","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items","disabled"])):(se=e.metadata[e.metadataKey].items[a])!=null&&se.editor_mode&&!((oe=e.metadata[e.metadataKey].items[a])!=null&&oe.invisible)?(t(),n("div",Ca,[l(x(Be),{theme:((ce=e.metadata[e.metadataKey].items[a])==null?void 0:ce.editor_theme)||"vs-light",language:((be=e.metadata[e.metadataKey].items[a])==null?void 0:be.editor_language)||"json",style:{"min-height":"100px","flex-grow":"1",border:"1px solid rgba(0, 0, 0, 0.1)"},value:e.iterable[a],"onUpdate:value":d=>e.iterable[a]=d},null,8,["theme","language","value","onUpdate:value"]),l(Z,{icon:"",size:"small",variant:"text",color:"primary",class:"editor-fullscreen-btn",onClick:d=>{var $,N;return Fe(a,e.iterable,($=e.metadata[e.metadataKey].items[a])==null?void 0:$.editor_theme,(N=e.metadata[e.metadataKey].items[a])==null?void 0:N.editor_language)},title:x(X)("core.common.editor.fullscreen")},{default:i(()=>[l(Le,null,{default:i(()=>[K("mdi-fullscreen")]),_:1})]),_:2},1032,["onClick","title"])])):((fe=e.metadata[e.metadataKey].items[a])==null?void 0:fe.type)==="string"&&!((ye=e.metadata[e.metadataKey].items[a])!=null&&ye.invisible)?(t(),s(q,{key:9,modelValue:e.iterable[a],"onUpdate:modelValue":d=>e.iterable[a]=d,density:"compact",variant:"outlined",class:"config-field","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])):(((Ve=e.metadata[e.metadataKey].items[a])==null?void 0:Ve.type)==="int"||((Ke=e.metadata[e.metadataKey].items[a])==null?void 0:Ke.type)==="float")&&!((ve=e.metadata[e.metadataKey])!=null&&ve.invisible)?(t(),s(q,{key:10,modelValue:e.iterable[a],"onUpdate:modelValue":d=>e.iterable[a]=d,density:"compact",variant:"outlined",class:"config-field",type:"number","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])):((ge=e.metadata[e.metadataKey].items[a])==null?void 0:ge.type)==="text"&&!((re=e.metadata[e.metadataKey].items[a])!=null&&re.invisible)?(t(),s(De,{key:11,modelValue:e.iterable[a],"onUpdate:modelValue":d=>e.iterable[a]=d,variant:"outlined",rows:"3",class:"config-field","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])):((he=e.metadata[e.metadataKey].items[a])==null?void 0:he.type)==="bool"&&!((Ue=e.metadata[e.metadataKey].items[a])!=null&&Ue.invisible)?(t(),s(Oe,{key:12,modelValue:e.iterable[a],"onUpdate:modelValue":d=>e.iterable[a]=d,color:"primary",inset:"",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])):((xe=e.metadata[e.metadataKey].items[a])==null?void 0:xe.type)==="list"&&!((Ce=e.metadata[e.metadataKey].items[a])!=null&&Ce.invisible)?(t(),s(Ee,{key:13,modelValue:e.iterable[a],"onUpdate:modelValue":d=>e.iterable[a]=d,class:"config-field"},null,8,["modelValue","onUpdate:modelValue"])):((we=e.metadata[e.metadataKey].items[a])==null?void 0:we.type)==="dict"&&!((je=e.metadata[e.metadataKey].items[a])!=null&&je.invisible)?(t(),s(Ge,{key:14,modelValue:e.iterable[a],"onUpdate:modelValue":d=>e.iterable[a]=d,class:"config-field"},null,8,["modelValue","onUpdate:modelValue"])):g("",!0)])):(t(),n("div",wa,[l(q,{modelValue:e.iterable[a],"onUpdate:modelValue":d=>e.iterable[a]=d,label:a,density:"compact",variant:"outlined",class:"config-field","hide-details":""},null,8,["modelValue","onUpdate:modelValue","label"])]))]}),_:2},1024)]),_:2},1024)):g("",!0),He(M.value,U)&&!((S=e.metadata[e.metadataKey].items[a])!=null&&S.invisible)&&P(e.metadata[e.metadataKey].items[a],a)?(t(),s(Ne,{key:1,class:"config-divider"})):g("",!0)],64))])}),128))])):(t(),n("div",ja,[l(ze,{class:"config-row"},{default:i(()=>[l(w,{cols:"12",sm:"6",class:"property-info"},{default:i(()=>[l(Ie,{density:"compact"},{default:i(()=>[l(W,{class:"property-name"},{default:i(()=>{var u;return[K(b((u=e.metadata[e.metadataKey])==null?void 0:u.description)+" ",1),Q("span",Ba,"("+b(e.metadataKey)+")",1)]}),_:1}),l(Y,{class:"property-hint"},{default:i(()=>{var u,a,U;return[(u=e.metadata[e.metadataKey])!=null&&u.obvious_hint&&((a=e.metadata[e.metadataKey])!=null&&a.hint)?(t(),n("span",Ea,"‼️")):g("",!0),K(" "+b((U=e.metadata[e.metadataKey])==null?void 0:U.hint),1)]}),_:1})]),_:1})]),_:1}),l(w,{cols:"12",sm:"1",class:"d-flex align-center type-indicator"},{default:i(()=>{var u;return[(u=e.metadata[e.metadataKey])!=null&&u.invisible?g("",!0):(t(),s(Se,{key:0,color:"primary",label:"",size:"x-small",variant:"flat"},{default:i(()=>{var a;return[K(b((a=e.metadata[e.metadataKey])==null?void 0:a.type),1)]}),_:1}))]}),_:1}),l(w,{cols:"12",sm:"5",class:"config-input"},{default:i(()=>{var u,a,U,E,T,I,S,f,y,h,A,L,D,O,z;return[Q("div",Ta,[(u=e.metadata[e.metadataKey])!=null&&u.options&&!((a=e.metadata[e.metadataKey])!=null&&a.invisible)?(t(),s(Ae,{key:0,modelValue:e.iterable[e.metadataKey],"onUpdate:modelValue":m[0]||(m[0]=V=>e.iterable[e.metadataKey]=V),items:(U=e.metadata[e.metadataKey])==null?void 0:U.options,disabled:(E=e.metadata[e.metadataKey])==null?void 0:E.readonly,density:"compact",variant:"outlined",class:"config-field","hide-details":""},null,8,["modelValue","items","disabled"])):((T=e.metadata[e.metadataKey])==null?void 0:T.type)==="string"&&!((I=e.metadata[e.metadataKey])!=null&&I.invisible)?(t(),s(q,{key:1,modelValue:e.iterable[e.metadataKey],"onUpdate:modelValue":m[1]||(m[1]=V=>e.iterable[e.metadataKey]=V),density:"compact",variant:"outlined",class:"config-field","hide-details":""},null,8,["modelValue"])):(((S=e.metadata[e.metadataKey])==null?void 0:S.type)==="int"||((f=e.metadata[e.metadataKey])==null?void 0:f.type)==="float")&&!((y=e.metadata[e.metadataKey])!=null&&y.invisible)?(t(),s(q,{key:2,modelValue:e.iterable[e.metadataKey],"onUpdate:modelValue":m[2]||(m[2]=V=>e.iterable[e.metadataKey]=V),density:"compact",variant:"outlined",class:"config-field",type:"number","hide-details":""},null,8,["modelValue"])):((h=e.metadata[e.metadataKey])==null?void 0:h.type)==="text"&&!((A=e.metadata[e.metadataKey])!=null&&A.invisible)?(t(),s(De,{key:3,modelValue:e.iterable[e.metadataKey],"onUpdate:modelValue":m[3]||(m[3]=V=>e.iterable[e.metadataKey]=V),variant:"outlined","auto-grow":"",rows:"3",class:"config-field","hide-details":""},null,8,["modelValue"])):((L=e.metadata[e.metadataKey])==null?void 0:L.type)==="bool"&&!((D=e.metadata[e.metadataKey])!=null&&D.invisible)?(t(),s(Oe,{key:4,modelValue:e.iterable[e.metadataKey],"onUpdate:modelValue":m[4]||(m[4]=V=>e.iterable[e.metadataKey]=V),color:"primary",inset:"",density:"compact","hide-details":""},null,8,["modelValue"])):((O=e.metadata[e.metadataKey])==null?void 0:O.type)==="list"&&!((z=e.metadata[e.metadataKey])!=null&&z.invisible)?(t(),s(Ee,{key:5,modelValue:e.iterable[e.metadataKey],"onUpdate:modelValue":m[5]||(m[5]=V=>e.iterable[e.metadataKey]=V),class:"config-field"},null,8,["modelValue"])):g("",!0)])]}),_:1})]),_:1}),l(Ne,{class:"my-2 config-divider"})]))]}),_:1}),l(da,{modelValue:B.value,"onUpdate:modelValue":m[8]||(m[8]=o=>B.value=o),fullscreen:"",transition:"dialog-bottom-transition",scrollable:""},{default:i(()=>[l(_e,null,{default:i(()=>[l(ea,{color:"primary",dark:""},{default:i(()=>[l(Z,{icon:"",onClick:m[6]||(m[6]=o=>B.value=!1)},{default:i(()=>[l(Le,null,{default:i(()=>[K("mdi-close")]),_:1})]),_:1}),l(aa,null,{default:i(()=>[K(b(x(X)("core.common.editor.editingTitle"))+" - "+b(F.value),1)]),_:1}),l(ta),l(la,null,{default:i(()=>[l(Z,{variant:"text",onClick:Pe},{default:i(()=>[K(b(x(X)("core.common.save")),1)]),_:1})]),_:1})]),_:1}),l(qe,{class:"pa-0"},{default:i(()=>[l(x(Be),{theme:p.value,language:k.value,style:{height:"calc(100vh - 64px)"},value:x(G)[F.value],"onUpdate:value":m[7]||(m[7]=o=>x(G)[F.value]=o)},null,8,["theme","language","value"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},Oa=ia(Ia,[["__scopeId","data-v-fdb02c58"]]);export{Oa as A};
