import{u as A,a5 as G,_ as f,a6 as I,k as g,b as s,w as t,I as H,X as k,ag as R,o as u,aa as U,l,e as h,d,t as i,S as K,C as L,p as v,c as C,F as b,n as T,ab as V,D as x,E,H as w,W as M,a8 as W,f as P,Y as X,x as N,T as z,B as D,a7 as Y,ao as Q,ap as j,V as F,ad as Z,aq as $,ar as ee,as as se,at as te,au as oe,av as re,aw as ae,ax as le}from"./index-427e6df5.js";import{A as ie}from"./AstrBotConfig-8422f4c3.js";import{V as ne}from"./index-c4200cc5.js";import{I as de}from"./ItemCard-7d8df7ff.js";import{_ as ce}from"./_plugin-vue_export-helper-c27b6911.js";import"./KnowledgeBaseSelector-73bc8187.js";const me={name:"ToolUsePage",components:{AstrBotConfig:ie,VueMonacoEditor:ne,ItemCard:de},setup(){const{t:o}=A(),{tm:e}=G("features/tooluse");return{t:o,tm:e}},data(){return{refreshInterval:null,mcpServers:[],tools:[],showMcpServerDialog:!1,selectedMcpServerProvider:"modelscope",mcpServerProviderList:["modelscope"],mcpProviderToken:"",showSyncMcpServerDialog:!1,addServerDialogMessage:"",showToolsDialog:!1,showTools:!0,loading:!1,loadingGettingServers:!1,mcpServerUpdateLoaders:{},isEditMode:!1,serverConfigJson:"",jsonError:null,currentServer:{name:"",active:!0,tools:[]},save_message_snack:!1,save_message:"",save_message_success:"success",toolSearch:"",openedPanel:[]}},computed:{filteredTools(){if(!this.toolSearch)return this.tools;const o=this.toolSearch.toLowerCase();return this.tools.filter(e=>e.name.toLowerCase().includes(o)||e.description.toLowerCase().includes(o))},isServerFormValid(){return!!this.currentServer.name&&!this.jsonError},getServerConfigSummary(){return o=>{if(o.command)return`${o.command} ${(o.args||[]).join(" ")}`;const e=Object.keys(o).filter(c=>!["name","active","tools"].includes(c));return e.length>0?this.tm("mcpServers.status.configSummary",{keys:e.join(", ")}):this.tm("mcpServers.status.noConfig")}}},mounted(){this.getServers(),this.getTools(),this.refreshInterval=setInterval(()=>{this.getServers(),this.getTools()},5e3)},unmounted(){this.refreshInterval&&clearInterval(this.refreshInterval)},methods:{openurl(o){window.open(o,"_blank")},formatToolName(o){if(o.includes(":")){const e=o.split(":");return e[e.length-1]}return o},getServers(){this.loadingGettingServers=!0,f.get("/api/tools/mcp/servers").then(o=>{this.mcpServers=o.data.data||[],this.mcpServers.forEach(e=>{this.mcpServerUpdateLoaders[e.name]||(this.mcpServerUpdateLoaders[e.name]=!1)})}).catch(o=>{this.showError(this.tm("messages.getServersError",{error:o.message}))}).finally(()=>{this.loadingGettingServers=!1})},getTools(){f.get("/api/tools/list").then(o=>{this.tools=o.data.data||[]}).catch(o=>{this.showError(this.tm("messages.getToolsError",{error:o.message}))})},validateJson(){try{return this.serverConfigJson.trim()?(JSON.parse(this.serverConfigJson),this.jsonError=null,!0):(this.jsonError=this.tm("dialogs.addServer.errors.configEmpty"),!1)}catch(o){return this.jsonError=this.tm("dialogs.addServer.errors.jsonFormat",{error:o.message}),!1}},setConfigTemplate(o="stdio"){let e={};o==="streamable_http"?e={transport:"streamable_http",url:"your mcp server url",headers:{},timeout:5,sse_read_timeout:300}:o==="sse"?e={transport:"sse",url:"your mcp server url",headers:{},timeout:5,sse_read_timeout:300}:e={command:"python",args:["-m","your_module"]},this.serverConfigJson=JSON.stringify(e,null,2)},saveServer(){if(this.validateJson()){this.loading=!0;try{const o=JSON.parse(this.serverConfigJson),e={name:this.currentServer.name,active:this.currentServer.active,...o},c=this.isEditMode?"/api/tools/mcp/update":"/api/tools/mcp/add";f.post(c,e).then(r=>{this.loading=!1,this.showMcpServerDialog=!1,this.addServerDialogMessage="",this.getServers(),this.getTools(),this.showSuccess(r.data.message||this.tm("messages.saveSuccess")),this.resetForm()}).catch(r=>{var a,m;this.loading=!1,this.showError(this.tm("messages.saveError",{error:((m=(a=r.response)==null?void 0:a.data)==null?void 0:m.message)||r.message}))})}catch(o){this.loading=!1,this.showError(this.tm("dialogs.addServer.errors.jsonParse",{error:o.message}))}}},deleteServer(o){let e=o.name||o;confirm(this.tm("dialogs.confirmDelete",{name:e}))&&f.post("/api/tools/mcp/delete",{name:e}).then(c=>{this.getServers(),this.getTools(),this.showSuccess(c.data.message||this.tm("messages.deleteSuccess"))}).catch(c=>{var r,a;this.showError(this.tm("messages.deleteError",{error:((a=(r=c.response)==null?void 0:r.data)==null?void 0:a.message)||c.message}))})},editServer(o){const e={...o};try{delete e.name,delete e.active,delete e.tools,delete e.errlogs}catch(c){console.error("Error removing basic fields: ",c)}this.currentServer={name:o.name,active:o.active,tools:o.tools||[]},this.serverConfigJson=JSON.stringify(e,null,2),this.isEditMode=!0,this.showMcpServerDialog=!0},updateServerStatus(o){this.mcpServerUpdateLoaders[o.name]=!0,o.active=!o.active,f.post("/api/tools/mcp/update",o).then(e=>{this.getServers(),this.showSuccess(e.data.message||this.tm("messages.updateSuccess"))}).catch(e=>{var c,r;this.showError(this.tm("messages.updateError",{error:((r=(c=e.response)==null?void 0:c.data)==null?void 0:r.message)||e.message})),o.active=!o.active}).finally(()=>{this.mcpServerUpdateLoaders[o.name]=!1})},closeServerDialog(){this.showMcpServerDialog=!1,this.addServerDialogMessage="",this.resetForm()},testServerConnection(){if(!this.validateJson())return;this.loading=!0;let o;try{o=JSON.parse(this.serverConfigJson)}catch(e){this.loading=!1,this.showError(this.tm("dialogs.addServer.errors.jsonParse",{error:e.message}));return}f.post("/api/tools/mcp/test",{mcp_server_config:o}).then(e=>{this.loading=!1,this.addServerDialogMessage=`${e.data.message} (tools: ${e.data.data})`}).catch(e=>{var c,r;this.loading=!1,this.showError(this.tm("messages.testError",{error:((r=(c=e.response)==null?void 0:c.data)==null?void 0:r.message)||e.message}))})},resetForm(){this.currentServer={name:"",active:!0,tools:[]},this.serverConfigJson="",this.jsonError=null,this.isEditMode=!1},showSuccess(o){this.save_message=o,this.save_message_success="success",this.save_message_snack=!0},showError(o){this.save_message=o,this.save_message_success="error",this.save_message_snack=!0},async toggleToolStatus(o){var e,c;try{const r=await f.post("/api/tools/toggle-tool",{name:o.name,activate:o.active});r.data.status==="ok"?this.showSuccess(r.data.message||this.tm("messages.toggleToolSuccess")):(o.active=!o.active,this.showError(r.data.message||this.tm("messages.toggleToolError")))}catch(r){o.active=!o.active,this.showError(this.tm("messages.toggleToolError",{error:((c=(e=r.response)==null?void 0:e.data)==null?void 0:c.message)||r.message}))}},async syncMcpServers(){var o,e;if(!this.selectedMcpServerProvider){this.showError(this.tm("syncProvider.status.selectProvider"));return}this.loading=!0;try{const c={name:this.selectedMcpServerProvider};if(this.selectedMcpServerProvider==="modelscope"){if(!this.mcpProviderToken.trim()){this.showError(this.tm("syncProvider.status.enterToken")),this.loading=!1;return}c.access_token=this.mcpProviderToken.trim()}const r=await f.post("/api/tools/mcp/sync-provider",c);r.data.status==="ok"?(this.showSuccess(r.data.message||this.tm("syncProvider.messages.syncSuccess")),this.showSyncMcpServerDialog=!1,this.mcpProviderToken="",this.getServers(),this.getTools()):this.showError(r.data.message||this.tm("syncProvider.messages.syncError",{error:"Unknown error"}))}catch(c){console.error("同步 MCP 服务器失败:",c),this.showError(this.tm("syncProvider.messages.syncError",{error:((e=(o=c.response)==null?void 0:o.data)==null?void 0:e.message)||c.message||"网络连接或访问令牌问题"}))}finally{this.loading=!1}}}},S=o=>(ae("data-v-838152ed"),o=o(),le(),o),ue={class:"tools-page"},ge={class:"text-h1 font-weight-bold mb-2"},pe={class:"text-subtitle-1 text-medium-emphasis mb-4 d-flex align-center"},he={key:0,class:"text-center pa-8"},ve={class:"text-grey mt-4"},fe={class:"d-flex align-center mb-2"},_e=["title"],Se={class:"d-flex",style:{gap:"8px"}},ye={key:0},be={class:"d-flex align-center mb-1"},xe={key:1,class:"text-caption text-medium-emphasis"},we={key:0,class:"text-caption text-medium-emphasis"},ke={class:"mb-2 d-flex align-center"},Ce={class:"text-subtitle-1"},Te={style:{color:"grey"}},Ve={class:"monaco-container",style:{"margin-top":"16px"}},Ee={key:0,class:"mt-2 text-error"},Me={style:{"margin-top":"8px"}},Pe=S(()=>l("span",null,"同步外部平台 MCP 服务器",-1)),De={key:0},Ue=S(()=>l("div",null,[l("div",{class:"text-h4"},"发现 MCP 服务器"),l("p",{class:"mt-2"},[d(" 访问 "),l("a",{href:"https://www.modelscope.cn/mcp",target:"_blank"},"ModelScope 平台"),d(" 浏览需要的 MCP 服务器。 ")])],-1)),ze=S(()=>l("div",null,[l("div",{class:"text-h4"},"获取访问令牌"),l("p",{class:"mt-2"},[d(" 从"),l("a",{href:"https://modelscope.cn/my/myaccesstoken",target:"_blank"},"账户设置"),d("中获取个人访问令牌。 ")])],-1)),je=S(()=>l("div",{class:"text-h4"},"输入您的访问令牌",-1)),Je=S(()=>l("p",{class:"mt-2"}," 输入您的访问令牌以同步 MCP 服务器。 ",-1)),Ie={class:"pa-4"},Le={key:0,class:"text-center pa-8"},Ne={class:"text-grey mt-4"},Fe={key:1},Be=S(()=>l("small",null,"复选框代表该工具是否被启用。",-1)),Oe={class:"d-flex align-center"},qe=["title"],Ae={class:"text-body-1 font-weight-medium mb-3"},Ge={class:"text-body-2 ml-6 mb-4"},He={class:"text-body-1 font-weight-medium mb-3"},Re={class:"font-weight-medium"},Ke={key:1,class:"text-center pa-4 text-medium-emphasis"};function We(o,e,c,r,a,m){const B=I("item-card"),O=I("VueMonacoEditor");return u(),g("div",ue,[s(H,{fluid:"",class:"pa-0",elevation:"0"},{default:t(()=>[s(U,{class:"d-flex justify-space-between align-center px-4 py-3 pb-8"},{default:t(()=>[l("div",null,[l("h1",ge,[s(h,{color:"black",class:"me-2"},{default:t(()=>[d("mdi-function-variant")]),_:1}),d(i(r.tm("title")),1)]),l("p",pe,[d(i(r.tm("subtitle"))+" ",1),s(K,{location:"top"},{activator:t(({props:n})=>[s(h,L(n,{size:"small",color:"primary",class:"ms-1 cursor-pointer",onClick:e[0]||(e[0]=y=>m.openurl("https://astrbot.app/use/function-calling.html"))}),{default:t(()=>[d(" mdi-information ")]),_:2},1040)]),default:t(()=>[l("span",null,i(r.tm("tooltip.info")),1)]),_:1})])]),l("div",null,[s(v,{color:"primary","prepend-icon":"mdi-tools",class:"me-2",variant:"tonal",onClick:e[1]||(e[1]=n=>a.showToolsDialog=!0),rounded:"xl",size:"x-large"},{default:t(()=>[d(i(r.tm("functionTools.buttons.view"))+"("+i(a.tools.length)+") ",1)]),_:1}),s(v,{color:"success","prepend-icon":"mdi-plus",class:"me-2",variant:"tonal",onClick:e[2]||(e[2]=n=>a.showMcpServerDialog=!0),rounded:"xl",size:"x-large"},{default:t(()=>[d(i(r.tm("mcpServers.buttons.add")),1)]),_:1}),s(v,{color:"success","prepend-icon":"mdi-refresh",variant:"tonal",onClick:e[3]||(e[3]=n=>a.showSyncMcpServerDialog=!0),rounded:"xl",size:"x-large"},{default:t(()=>[d(i(r.tm("mcpServers.buttons.sync")),1)]),_:1})])]),_:1}),a.mcpServers.length===0?(u(),g("div",he,[s(h,{size:"64",color:"grey-lighten-1"},{default:t(()=>[d("mdi-server-off")]),_:1}),l("p",ve,i(r.tm("mcpServers.empty")),1)])):(u(),C(U,{key:1},{default:t(()=>[(u(!0),g(b,null,T(a.mcpServers||[],(n,y)=>(u(),C(V,{key:y,cols:"12",md:"6",lg:"4",xl:"3"},{default:t(()=>[s(B,{style:{"background-color":"rgb(var(--v-theme-mcpCardBg))"},item:n,"title-field":"name","enabled-field":"active",onToggleEnabled:m.updateServerStatus,onDelete:m.deleteServer,onEdit:m.editServer},{"item-details":t(({item:p})=>[l("div",fe,[s(h,{size:"small",color:"grey",class:"me-2"},{default:t(()=>[d("mdi-file-code")]),_:1}),l("span",{class:"text-caption text-medium-emphasis text-truncate",title:m.getServerConfigSummary(p)},i(m.getServerConfigSummary(p)),9,_e)]),l("div",Se,[l("div",null,[p.tools&&p.tools.length>0?(u(),g("div",ye,[l("div",be,[s(h,{size:"small",color:"grey",class:"me-2"},{default:t(()=>[d("mdi-tools")]),_:1}),s(k,{"max-width":"600px"},{activator:t(({props:_})=>[l("span",L({class:"text-caption text-medium-emphasis cursor-pointer"},_,{style:{"text-decoration":"underline"}}),i(r.tm("mcpServers.status.availableTools",{count:p.tools.length}))+" ("+i(p.tools.length)+") ",17)]),default:t(({isActive:_})=>[s(x,{style:{padding:"16px"}},{default:t(()=>[s(E,{class:"d-flex align-center"},{default:t(()=>[l("span",null,i(r.tm("mcpServers.status.availableTools")),1)]),_:1}),s(w,null,{default:t(()=>[l("ul",null,[(u(!0),g(b,null,T(p.tools,(J,q)=>(u(),g("li",{key:q,style:{margin:"8px 0px"}},i(J),1))),128))])]),_:2},1024),s(M,{class:"d-flex justify-end"},{default:t(()=>[s(v,{variant:"text",color:"primary",onClick:J=>_.value=!1},{default:t(()=>[d(" Close ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])])):(u(),g("div",xe,[s(h,{size:"small",color:"warning",class:"me-1"},{default:t(()=>[d("mdi-alert-circle")]),_:1}),d(" "+i(r.tm("mcpServers.status.noTools")),1)]))]),a.mcpServerUpdateLoaders[p.name]?(u(),g("div",we,[s(W,{indeterminate:"",color:"primary",size:"16"})])):P("",!0)])]),_:2},1032,["item","onToggleEnabled","onDelete","onEdit"])]),_:2},1024))),128))]),_:1}))]),_:1}),s(k,{modelValue:a.showMcpServerDialog,"onUpdate:modelValue":e[9]||(e[9]=n=>a.showMcpServerDialog=n),"max-width":"750px",persistent:""},{default:t(()=>[s(x,null,{default:t(()=>[s(E,{class:"bg-primary text-white py-3"},{default:t(()=>[s(h,{color:"white",class:"me-2"},{default:t(()=>[d(i(a.isEditMode?"mdi-pencil":"mdi-plus"),1)]),_:1}),l("span",null,i(a.isEditMode?r.tm("dialogs.addServer.editTitle"):r.tm("dialogs.addServer.title")),1)]),_:1}),s(w,{class:"py-4"},{default:t(()=>[s(X,{onSubmit:N(m.saveServer,["prevent"]),ref:"form"},{default:t(()=>[s(z,{modelValue:a.currentServer.name,"onUpdate:modelValue":e[4]||(e[4]=n=>a.currentServer.name=n),label:r.tm("dialogs.addServer.fields.name"),variant:"outlined",rules:[n=>!!n||r.tm("dialogs.addServer.fields.nameRequired")],required:"",class:"mb-3"},null,8,["modelValue","label","rules"]),l("div",ke,[l("span",Ce,i(r.tm("dialogs.addServer.fields.config")),1),s(D),s(v,{size:"small",color:"primary",variant:"tonal",onClick:e[5]||(e[5]=n=>m.setConfigTemplate("stdio")),class:"me-1"},{default:t(()=>[d(i(r.tm("mcpServers.buttons.useTemplateStdio")),1)]),_:1}),s(v,{size:"small",color:"primary",variant:"tonal",onClick:e[6]||(e[6]=n=>m.setConfigTemplate("streamable_http")),class:"me-1"},{default:t(()=>[d(i(r.tm("mcpServers.buttons.useTemplateStreamableHttp")),1)]),_:1}),s(v,{size:"small",color:"primary",variant:"tonal",onClick:e[7]||(e[7]=n=>m.setConfigTemplate("sse")),class:"me-1"},{default:t(()=>[d(i(r.tm("mcpServers.buttons.useTemplateSse")),1)]),_:1})]),l("small",Te,"*"+i(r.tm("dialogs.addServer.tips.timeoutConfig")),1),l("div",Ve,[s(O,{value:a.serverConfigJson,"onUpdate:value":e[8]||(e[8]=n=>a.serverConfigJson=n),theme:"vs-dark",language:"json",options:{minimap:{enabled:!1},scrollBeyondLastLine:!1,automaticLayout:!0,lineNumbers:"on",roundedSelection:!0,tabSize:2},onChange:m.validateJson},null,8,["value","onChange"])]),a.jsonError?(u(),g("div",Ee,[s(h,{color:"error",size:"small",class:"me-1"},{default:t(()=>[d("mdi-alert-circle")]),_:1}),l("span",null,i(a.jsonError),1)])):P("",!0)]),_:1},8,["onSubmit"]),l("div",Me,[l("small",null,i(a.addServerDialogMessage),1)])]),_:1}),s(M,{class:"pa-4"},{default:t(()=>[s(D),s(v,{variant:"text",onClick:m.closeServerDialog,disabled:a.loading},{default:t(()=>[d(i(r.tm("dialogs.addServer.buttons.cancel")),1)]),_:1},8,["onClick","disabled"]),s(v,{variant:"text",onClick:m.testServerConnection,disabled:a.loading},{default:t(()=>[d(i(r.tm("dialogs.addServer.buttons.testConnection")),1)]),_:1},8,["onClick","disabled"]),s(v,{color:"primary",onClick:m.saveServer,loading:a.loading,disabled:!m.isServerFormValid},{default:t(()=>[d(i(r.tm("dialogs.addServer.buttons.save")),1)]),_:1},8,["onClick","loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(k,{modelValue:a.showSyncMcpServerDialog,"onUpdate:modelValue":e[13]||(e[13]=n=>a.showSyncMcpServerDialog=n),"max-width":"500px",persistent:""},{default:t(()=>[s(x,null,{default:t(()=>[s(E,{class:"bg-primary text-white py-3"},{default:t(()=>[Pe]),_:1}),s(w,{class:"py-4"},{default:t(()=>[s(Y,{modelValue:a.selectedMcpServerProvider,"onUpdate:modelValue":e[10]||(e[10]=n=>a.selectedMcpServerProvider=n),items:a.mcpServerProviderList,label:"选择平台",variant:"outlined",required:""},null,8,["modelValue","items"]),a.selectedMcpServerProvider==="modelscope"?(u(),g("div",De,[s(Q,{align:"start",side:"end"},{default:t(()=>[s(j,{icon:"mdi-numeric-1","icon-color":"rgb(var(--v-theme-background))"},{default:t(()=>[Ue]),_:1}),s(j,{icon:"mdi-numeric-2","icon-color":"rgb(var(--v-theme-background))"},{default:t(()=>[ze]),_:1}),s(j,{icon:"mdi-numeric-3","icon-color":"rgb(var(--v-theme-background))"},{default:t(()=>[l("div",null,[je,Je,s(z,{modelValue:a.mcpProviderToken,"onUpdate:modelValue":e[11]||(e[11]=n=>a.mcpProviderToken=n),type:"password",variant:"outlined",label:"访问令牌",class:"mt-2","hide-details":""},null,8,["modelValue"])])]),_:1})]),_:1})])):P("",!0)]),_:1}),s(M,{class:"pa-4"},{default:t(()=>[s(D),s(v,{variant:"text",onClick:e[12]||(e[12]=n=>a.showSyncMcpServerDialog=!1),disabled:a.loading},{default:t(()=>[d(i(r.tm("dialogs.addServer.buttons.cancel")),1)]),_:1},8,["disabled"]),s(v,{color:"primary",onClick:m.syncMcpServers,loading:a.loading,disabled:a.loading},{default:t(()=>[d(i(r.tm("dialogs.addServer.buttons.sync")),1)]),_:1},8,["onClick","loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(k,{modelValue:a.showToolsDialog,"onUpdate:modelValue":e[18]||(e[18]=n=>a.showToolsDialog=n),"max-width":"800px"},{default:t(()=>[s(x,{elevation:"0",class:"mt-4"},{default:t(()=>[s(E,{class:"d-flex align-center py-3 px-4"},{default:t(()=>[d(i(r.tm("functionTools.title"))+" ",1),s(F,{color:"info",size:"small",class:"ml-2"},{default:t(()=>[d(i(a.tools.length),1)]),_:1})]),_:1}),s(Z,null,{default:t(()=>[a.showTools?(u(),C(w,{key:0,class:"pa-0"},{default:t(()=>[l("div",Ie,[a.tools.length===0?(u(),g("div",Le,[s(h,{size:"64",color:"grey-lighten-1"},{default:t(()=>[d("mdi-api-off")]),_:1}),l("p",Ne,i(r.tm("functionTools.empty")),1)])):(u(),g("div",Fe,[s(z,{modelValue:a.toolSearch,"onUpdate:modelValue":e[14]||(e[14]=n=>a.toolSearch=n),"prepend-inner-icon":"mdi-magnify",label:r.tm("functionTools.search"),variant:"outlined",density:"compact",class:"mb-4","hide-details":"",clearable:""},null,8,["modelValue","label"]),Be,s($,{modelValue:a.openedPanel,"onUpdate:modelValue":e[16]||(e[16]=n=>a.openedPanel=n),multiple:"",style:{"max-height":"500px","overflow-y":"auto"}},{default:t(()=>[(u(!0),g(b,null,T(m.filteredTools,(n,y)=>(u(),C(ee,{key:y,value:y,class:"mb-2 tool-panel",rounded:"lg"},{default:t(()=>[s(se,null,{default:t(()=>[s(U,{"no-gutters":"",align:"center"},{default:t(()=>[s(V,{cols:"1"},{default:t(()=>[s(te,{modelValue:n.active,"onUpdate:modelValue":p=>n.active=p,color:"primary","hide-details":"",density:"compact",onClick:e[15]||(e[15]=N(()=>{},["stop"])),onChange:p=>m.toggleToolStatus(n)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024),s(V,{cols:"3"},{default:t(()=>[l("div",Oe,[s(h,{color:"primary",class:"me-2",size:"small"},{default:t(()=>[d(i(n.name.includes(":")?"mdi-server-network":"mdi-function-variant"),1)]),_:2},1024),l("span",{class:"text-body-1 text-high-emphasis font-weight-medium text-truncate",title:n.name},i(m.formatToolName(n.name)),9,qe)])]),_:2},1024),s(V,{cols:"8",class:"text-grey"},{default:t(()=>[d(i(n.description),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),s(oe,null,{default:t(()=>[s(x,{flat:""},{default:t(()=>[s(w,null,{default:t(()=>[l("p",Ae,[s(h,{color:"primary",size:"small",class:"me-1"},{default:t(()=>[d("mdi-information")]),_:1}),d(" "+i(r.tm("functionTools.description")),1)]),l("p",Ge,i(n.description),1),n.parameters&&n.parameters.properties?(u(),g(b,{key:0},[l("p",He,[s(h,{color:"primary",size:"small",class:"me-1"},{default:t(()=>[d("mdi-code-json")]),_:1}),d(" "+i(r.tm("functionTools.parameters")),1)]),s(re,{density:"compact",class:"params-table mt-1"},{default:t(()=>[l("thead",null,[l("tr",null,[l("th",null,i(r.tm("functionTools.table.paramName")),1),l("th",null,i(r.tm("functionTools.table.type")),1),l("th",null,i(r.tm("functionTools.table.description")),1)])]),l("tbody",null,[(u(!0),g(b,null,T(n.parameters.properties,(p,_)=>(u(),g("tr",{key:_},[l("td",Re,i(_),1),l("td",null,[s(F,{size:"x-small",color:"primary",text:"",class:"text-caption"},{default:t(()=>[d(i(p.type),1)]),_:2},1024)]),l("td",null,i(p.description),1)]))),128))])]),_:2},1024)],64)):(u(),g("div",Ke,[s(h,{size:"large",color:"grey-lighten-1"},{default:t(()=>[d("mdi-code-brackets")]),_:1}),l("p",null,i(r.tm("functionTools.noParameters")),1)]))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]))])]),_:1})):P("",!0)]),_:1}),s(M,{class:"pa-4"},{default:t(()=>[s(D),s(v,{variant:"text",onClick:e[17]||(e[17]=n=>a.showToolsDialog=!1)},{default:t(()=>[d(i(r.tm("dialogs.serverDetail.buttons.close")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(R,{timeout:3e3,elevation:"24",color:a.save_message_success,modelValue:a.save_message_snack,"onUpdate:modelValue":e[19]||(e[19]=n=>a.save_message_snack=n),location:"top"},{default:t(()=>[d(i(a.save_message),1)]),_:1},8,["color","modelValue"])])}const ss=ce(me,[["render",We],["__scopeId","data-v-838152ed"]]);export{ss as default};
